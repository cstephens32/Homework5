

Installing and loading packages.
```{r packages}
#### Packages ####
## If a package is installed, it will be loaded. If any 
## are not, the missing package(s) will be installed 
## from CRAN and then loaded.

## Packages of interest
packages = c("tidyverse", "tigris", "sf", "viridis", "lubridate")

## Now load or install&load all
package.check <- lapply(
  packages,
  FUN = function(x) {
    if (!require(x, character.only = TRUE)) {
      install.packages(x, dependencies = TRUE)
      library(x, character.only = TRUE)}})
```


Loading in the data.
```{r load data}
## Load data ##
raw_data <- read.csv("data/homicide-data.csv")

philly <- raw_data %>% filter(city == "Philadelphia")

# pa_shape <- tigris::block_groups(state = "PA", county = 101, year = 2022, cb = F, class = "sf")
# 
# pa_shape2 <- tigris::tracts(state = "PA", county = 101, year = 2022, cb = F, class = "sf")

philly_tract <- read.csv("data/Census_Tracts_2010.csv")

philly <- philly %>% mutate(
  reported_date = ymd(reported_date),
  year_week = format(reported_date , "%Y-%m")
)

```



```{r}
# ggplot() + 
#   geom_sf(data = pa_shape2) + 
#   geom_point(data = philly, aes(x = lon, y = lat, color = victim_race))



```
nov 11 - april 4 winter
may 5 - oct 10 summer
```{r}

raw_data <- read.csv("data/homicide-data.csv")

balt <- raw_data %>% filter(city == "Baltimore")

balt <- balt %>% mutate(
  reported_date = ymd(reported_date),
  year_month = format(reported_date , "%Y-%m"), 
  month = as.numeric(format(reported_date , "%m")), 
  season = if_else(between(month, 05, 10), "Summer", "Winter")
)



```